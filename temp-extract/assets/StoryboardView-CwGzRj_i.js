import{c as B,a as W,u as A,j as e,L as $}from"./index-Dc-RHZ8Q.js";import{i as D,d as a,L as c}from"./vendor-DZhegkiK.js";import{u as H}from"./useVoiceHints-BWE_yW86.js";import{S as F}from"./StoryboardCanvas-DkCa5LDl.js";import"./api-ngrFHoWO.js";import"./crypto-DhyMKz0y.js";const G=()=>{const{id:o}=D(),[r,k]=a.useState(null),[y,x]=a.useState(!0),[p,m]=a.useState(!1),[l,h]=a.useState(!1),[t,g]=a.useState(null),[b,d]=a.useState(!1),{user:V,isAuthenticated:j}=B(),{showNotification:i,userPreferences:u}=W(),{get:v,post:n}=A(),{speak:f}=H();a.useEffect(()=>{N()},[o]);const N=async()=>{try{x(!0);const s=await v(`/storyboards/${o}`);if(s.success)k(s.storyboard),await n(`/storyboards/${o}/view`,{});else throw new Error(s.message||"Failed to load storyboard")}catch(s){i({type:"error",title:"Load Failed",message:s.message||"Failed to load storyboard"})}finally{x(!1)}},w=async()=>{try{m(!0),navigator.share?await navigator.share({title:r.title,text:r.description,url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),i({type:"success",title:"Link Copied",message:"Storyboard link copied to clipboard"})),await n(`/storyboards/${o}/share`,{})}catch(s){s.name!=="AbortError"&&i({type:"error",title:"Share Failed",message:"Failed to share storyboard"})}finally{m(!1)}},L=async()=>{try{l?(await n(`/storyboards/${o}/unbookmark`,{}),h(!1),i({type:"success",title:"Bookmark Removed",message:"Storyboard removed from bookmarks"})):(await n(`/storyboards/${o}/bookmark`,{}),h(!0),i({type:"success",title:"Bookmarked",message:"Storyboard added to bookmarks"}))}catch{i({type:"error",title:"Bookmark Failed",message:"Failed to update bookmark"})}},C=s=>{g(s),d(!0)},S=s=>{g(s),d(!0)},M=()=>{if(u.enableVoiceHints&&r){const s=`${r.title}. ${r.description}. This storyboard contains ${r.nodes?.length||0} nodes and ${r.edges?.length||0} connections.`;f(s)}};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx($,{size:"large",text:"Loading storyboard..."})}):r?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(c,{to:"/",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Back to Home"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[u.enableVoiceHints&&e.jsx("button",{onClick:M,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Read aloud",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}),j&&e.jsx("button",{onClick:L,className:`p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 ${l?"text-yellow-500":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,"aria-label":l?"Remove bookmark":"Add bookmark",children:e.jsx("svg",{className:"w-5 h-5",fill:l?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}),e.jsx("button",{onClick:w,disabled:p,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50","aria-label":"Share storyboard",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center text-white font-medium text-sm",children:r.author?.displayName?.[0]||"A"}),e.jsx("span",{children:r.author?.displayName||"Anonymous"})]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:new Date(r.updated_at).toLocaleDateString()}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsxs("span",{children:[r.view_count||0," views"]})]}),e.jsx("span",{children:"‚Ä¢"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),e.jsxs("span",{children:[r.share_count||0," shares"]})]})]}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4 leading-tight",children:r.title}),r.description&&e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:[r.nodes?.length||0," nodes"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),e.jsxs("span",{children:[r.edges?.length||0," connections"]})]}),r.isPublic&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-600 dark:text-green-400",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{children:"Public"})]}),r.isCollaborative&&e.jsxs("div",{className:"flex items-center space-x-1 text-blue-600 dark:text-blue-400",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{children:"Collaborative"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx(F,{nodes:r.nodes||[],edges:r.edges||[],onNodeSelect:C,onNodeDoubleClick:S,readonly:!0,height:"600px",className:"w-full"})}),e.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How to Navigate"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Click on nodes to view details"}),e.jsx("li",{children:"‚Ä¢ Double-click nodes for more information"}),e.jsx("li",{children:"‚Ä¢ Use mouse wheel or pinch to zoom"}),e.jsx("li",{children:"‚Ä¢ Drag to pan around the canvas"}),e.jsx("li",{children:"‚Ä¢ Use touch gestures on mobile devices"})]})]}),r.author&&e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"About the Creator"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center text-white font-medium text-xl",children:r.author.displayName?.[0]||"A"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.author.displayName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["@",r.author.username]}),r.author.bio&&e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:r.author.bio}),e.jsx("div",{className:"mt-4",children:e.jsx(c,{to:`/profile/${r.author.username}`,className:"text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View Profile ‚Üí"})})]})]})]})]}),b&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Node Details"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Label"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.label})]}),t.description&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.description})]}),t.url&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source URL"}),e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300 break-all",children:t.url})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map((s,z)=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-md",children:["#",s]},z))})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white rounded-lg font-medium transition-colors duration-200",children:"Close"})})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",role:"img","aria-label":"Not found",children:"üó∫Ô∏è"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Storyboard Not Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The storyboard you're looking for doesn't exist or has been removed."}),e.jsx(c,{to:"/",className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200",children:"Go Home"})]})})};export{G as default};
